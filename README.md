# Amazon売上利益計算システム

複数のAmazonアカウントと販路のCSVデータを統合し、月次利益を自動計算する高機能Webアプリケーション。

## 🚀 主要機能

### データ処理・管理
- **マルチファイル対応**: マカド、メルカリショップ、販路プラスの各CSVファイルを同時処理
- **アカウント別管理**: A-MアカウントとO-AAアカウントを分けて管理
- **ドラッグ&ドロップ**: 直感的なファイルアップロード機能
- **月別データ保存**: 2025年7月〜2026年7月の月次データ永続化

### 分析・レポート機能
- **リアルタイム処理**: ファイルアップロード後即座に結果を表示
- **前月比分析**: 売上・利益の月次比較と成長率計算
- **トレンドグラフ**: CSSオンリーの美しい視覚化
- **高度な分析**: 期間・販路別フィルタリング機能
- **ビジネスインサイト**: AI風の自動分析とアドバイス生成

### データエクスポート
- **スプレッドシート対応**: 完全なExcel/Google Sheets形式出力
- **個別エクスポート**: 月別単体でのCSVダウンロード
- **一括エクスポート**: 全期間データの統合出力
- **詳細分析レポート**: 利益率・前月比を含む包括的データ

### UI/UX
- **レスポンシブデザイン**: デスクトップ・タブレット・モバイル完全対応
- **PWA対応**: モバイルアプリのような使用感
- **タッチ最適化**: モバイルデバイスでの操作性向上
- **アクセシビリティ**: WAI-ARIA準拠の使いやすさ

## デプロイ

### Vercelへのデプロイ

1. GitHubリポジトリをVercelにインポート
2. 自動的にデプロイされます（設定不要）

本アプリケーションはVercel用に最適化されており、`vercel.json`と`api/index.py`により自動設定されます。

## ローカル開発

```bash
# 依存関係のインストール
pip install -r requirements.txt

# 開発サーバー起動
python main.py
```

## 環境変数

```bash
SECRET_KEY=your-secret-key-here  # 本番環境では必須
FLASK_ENV=development           # 開発時のみ
PORT=5000                       # ポート番号（デフォルト: 5000）
```

## 🔗 API エンドポイント

### 基本機能
- `GET /` - メインページ
- `GET /api/profit/health` - ヘルスチェック
- `POST /api/profit/upload` - ファイルアップロードと利益計算
- `POST /api/profit/validate` - ファイル検証のみ

### 月別データ管理
- `GET /api/months` - 対象月リストと保存状態を取得
- `GET /api/months/{month_key}` - 指定月のデータを取得
- `GET /api/months/{month_key}/spreadsheet` - 指定月のスプレッドシートデータをエクスポート
- `DELETE /api/months/{month_key}` - 指定月のデータを削除

### 使用例
```bash
# 月リスト取得
curl https://amazon-profit-calculator-s8eh.vercel.app/api/months

# 特定月のデータ取得
curl https://amazon-profit-calculator-s8eh.vercel.app/api/months/2025-07

# スプレッドシート形式でエクスポート  
curl https://amazon-profit-calculator-s8eh.vercel.app/api/months/2025-07/spreadsheet
```

## 🔒 セキュリティ

- **ファイルサイズ制限**: 16MB（不正な大容量ファイルを防止）
- **許可ファイル形式**: CSV のみ（セキュアなファイル処理）
- **一時ファイルの自動削除**: メモリリーク防止
- **適切なエラーハンドリング**: 予期せぬ動作の防止
- **CORS設定**: 適切なクロスオリジン制御
- **環境変数管理**: SECRET_KEY等の機密情報保護

## 📊 対応データ形式

### 入力ファイル
- **マカドデータ**: Amazon A-M・O-AAアカウント対応
- **メルカリショップデータ**: 売上・手数料・利益の詳細分析
- **販路プラスデータ**: 楽天・Yahoo!・その他モール対応

### 出力形式
- **スプレッドシート形式**: Excel/Google Sheets完全対応
- **CSV形式**: UTF-8 BOM付きで日本語完全対応
- **前月比データ**: パーセンテージ計算済み

## 🌐 デプロイ情報

- **本番URL**: https://amazon-profit-calculator-s8eh.vercel.app/
- **ホスティング**: Vercel (自動デプロイ対応)
- **リポジトリ**: GitHub連携による継続的デプロイ
- **パフォーマンス**: CDN最適化・高速レスポンス

## 📱 動作環境

### 対応ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+
- モバイルブラウザ各種

### 推奨環境
- デスクトップ: 1920x1080以上
- タブレット: 768px以上の画面幅
- モバイル: 320px以上の画面幅

## ライセンス

Private - 商用利用